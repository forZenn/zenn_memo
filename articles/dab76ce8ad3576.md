---
title: "systemd-resoveã®è¨­å®š"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["bash", "linux", "network"]
published: true
published_at: 2022-10-14 19:00 
---


å¾“æ¥ã¯linuxã¯/etc/resolv.confã§åå‰è§£æ±ºã‚’è¡Œã£ã¦ã„ãŸã€‚
ã—ã‹ã—ã€æœ€è¿‘ã®Linuxã§ã¯systemd-resolvedã§åå‰è§£æ±ºã‚’è¡Œã†ã“ã¨ãŒä¸»æµã«ãªã£ã¦ãã¦ã„ã‚‹ã€‚

resolvectlã«ã‚ˆã‚‹åå‰è§£æ±ºãŒå¼·åŠ›ãªã®ã¨å˜ç´”ã«åˆ†ã‹ã‚Šã‚„ã™ã„ã€‚
systemdã«æ©Ÿèƒ½ã‚’å¯„ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ã€‚

å°å…¥æ–¹æ³•ã‚’ä¸‹ã«æ›¸ãã€‚

## install

debian11ãªã©ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã¾ã /etc/resolv.confã‚’ä½¿ã£ã¦ã„ã‚‹os
ã®å ´åˆã¯systemd-resolvedã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```bash
sudo apt install -y systemd-resolved
```

## systemd-resolvdã«ç½®ãæ›ãˆ

systemd-resolvdã®å ´åˆã¯æ—¢å­˜ã®/etc/resolv.confã‚’å‰Šé™¤ã—ã¦ã€
/etc/resolv.confã‚’/run/systemd/resolve/resolv.confã¸ã®
ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

ã“ã†ã—ãªã„ã¨ã€/etc/resonv.confã¨systemd-resolvedãŒç«¶åˆã—ã¦ã—ã¾ã£ã¦ã€
systemd-resovledã§åå‰è§£æ±ºã¯ã§ãã‚‹ãŒã€pingãªã©
ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ã¯åå‰è§£æ±ºãŒã§ããªã„ã¨ã„ã†ä¸æ€è­°ãªç¾è±¡ãŒèµ·ãã¦ã—ã¾ã†ã€‚

```bash
rm /etc/resolv.conf 
ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf
```

## resolvedã®å†èµ·å‹•

```bash
sudo systemctl restart systemd-resolved
```

## ã¾ã¨ã‚

networké–¢ä¿‚ã¯ã™ã¹ã¦systemdã«çµ±ä¸€ã•ã‚Œã‚‹ã®ã¯ã»ã¼ç¢ºå®šã ã‚ã†ã€‚
systemdä½¿ã‚ãšã«networkã‚’ä½¿ã†ã®ã¯ä»Šå¾Œã¯å¾Œæ–¹äº’æ›ã‹ãƒ‹ãƒƒãƒãªç”¨é€”ã«ãªã‚‹ã¨
æ€ã‚ã‚Œã‚‹ã€‚

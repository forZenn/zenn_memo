---
title: "ãƒ©ã‚ºãƒ‘ã‚¤ã‚’bookwormã«ã‚ã’ãŸã‚‰sshdãŒä¸å®‰å®šã«ãªã£ãŸä»¶"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["debian", "linux", "ssh", "raspberrypi"]
published: true
---

è‡ªå®…ã‚µãƒ¼ãƒãƒ¼ã®ãƒ©ã‚ºãƒ‘ã‚¤4Bã‚’bookwormã«ã‚ã’ãŸã‚‰ã€sshdãŒä¸å®šæœŸã§ç¹‹ãŒã‚‰ãªããªã‚Šã¾ã—ãŸã€‚
pingã¯é€šã‚Šã€journalctlã§ãƒ­ã‚°ã‚’ã¿ã‚‹ã¨èªè¨¼ã®éƒ¨åˆ†ã§è½ã¡ã¦ã„ã¾ã™ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ç¹‹ãŒã£ã¦ãŠã‚Šã€
bullseyeæ™‚ç‚¹ã§ã¯ç‰¹ã«å•é¡ŒãŒãªã‹ã£ãŸã®ã§ãƒã‚°ãã•ã„ãªã¨æ€ã£ã¦å¯¾å¿œã—ãŸã®ã§ã“ã“ã«å¯¾å¿œæ–¹æ³•ã‚’æ›¸ãã¾ã™ã€‚

ã¨ã‚Šã‚ãˆãšã€è‡ªåˆ†ã¯testingã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚ã’ãŸã‚‰sshdãŒå®‰å®šã™ã‚‹ã‚ˆã†ã«ã¯ãªã‚Šã¾ã—ãŸã€‚

testintgãƒ–ãƒ©ãƒ³ãƒã«ã¤ã„ã¦ã¯[ã“ã“](https://zenn.dev/oto/articles/ad6f1608ff3085)ã«èª¬æ˜ãŒã‚ã‚Šã¾ã™ã€‚

### testingãƒ¬ãƒã‚¸ãƒˆãƒªã¸ã®urlã‚’è¿½åŠ ã™ã‚‹ã€‚ 

```bash:/etc/apt/sources.list
deb http://deb.debian.org/debian bookworm main contrib non-free non-free-firmware
deb http://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware
deb http://deb.debian.org/debian bookworm-updates main contrib non-free non-free-firmware

# bullseyeã‚’ä½¿ã£ã¦ã„ãŸæ™‚ã®ã¶ã¶
# deb http://deb.debian.org/debian bullseye main contrib non-free
# deb http://security.debian.org/debian-security bullseye-security main contrib non-free
# deb http://deb.debian.org/debian bullseye-updates main contrib non-free

# ã“ã“ã‚’è¿½åŠ 
# testing version
deb http://deb.debian.org/debian testing main contrib non-free non-free-firmware
deb http://security.debian.org/debian-security testing-security main contrib non-free non-free-firmware
deb http://deb.debian.org/debian testing-updates main contrib non-free non-free-firmware
```

### ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿testingãƒ¬ãƒã‚¸ãƒˆãƒªã«ã™ã‚‹ã€‚

sshdã¨é–¢ä¿‚ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ã¯testingä½¿ã„ãŸããªã„ã§ã™ã‚ˆã­ã€‚

sshdä»¥å¤–ã¯testingã§ã¯ãªãã¦bookwormã®ãƒªãƒã‚¸ãƒˆãƒªã‚’å‘ãã‚ˆã†ã«ã—ã¦ã€
sshdã¯testingã‚’è¦‹ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```bash:/etc/apt/preferences.d/testing.pref
# generally, don't use testing package
Package: *
Pin: release a=testing
Pin-Priority: -1


Package: openssh-server
Pin: release a=testing
Pin-Priority: 999

Package: openssh-client
Pin: release a=testing
Pin-Priority: 999

Package: openssh-client:armhf
Pin: release a=testing
Pin-Priority: 999

Package: openssh-sftp-server
Pin: release a=testing
Pin-Priority: 999
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

æ—¢ã«bookwormã«ã‚ã’ãŸäººã¯ä¸‹ã®äºŒã¤ã®è¨­å®šã‚’ã—ã¦ã‹ã‚‰

```bash
sudo apt update
sudo apt upgrade 
```

ã¾ã bullseyeã§ã“ã‚Œã‹ã‚‰bookwormã«ã—ãŸã„ãŒã€sshdã®ãƒã‚°ã«ã‚ãŸã‚ŠãŸããªã„äººã¯
ä¸‹ã®äºŒã¤ã®è¨­å®šã‚’è¡Œã£ã¦ã‹ã‚‰

```bash
sudo apt update
sudo apt full-upgrade -y
```

## ã¾ã¨ã‚

debianã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå‹•ã‹ãªã„ã¨æ€ã£ãŸã‚‰testingã‚„unstableã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã¨ã£ã¦ãã‚‹ã¨å‹•ãã‚ˆã†ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
èª¿ã¹ã¦è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

---
title: "rhelç³»OSã®bootstrap"
emoji: "ğŸ’¬"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['Linux', 'Fedora', 'ArchLinux', 'bash']
published: true
---

debianç³»ã«ã¯debootstrap,arcnç³»ã¯arch-bootstrapã§ã€
bootstrap(æœ€å°é™ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚„chrootç’°å¢ƒç”¨ã®åˆæœŸåŒ–å‡¦ç†)ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚

rhelç³»OSã«ã¯ã“ã‚Œã‚‰ã¨=ã®ã‚‚ã®ã¯ãªã„ãŒã€dnfã‚³ãƒãƒ³ãƒ‰ã§bootstrapä½œæ¥­ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚

dnfã‚³ãƒãƒ³ãƒ‰ã¯rhelç³»OSã§ã¯æœ€åˆã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ãŠã‚Šã€ãã®ä»–archlinux,manjarolinuxã§ã¯
Community repositoryã«ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã€ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚

ä¾‹ã¨ã—ã¦ã€chrootç’°å¢ƒã«å¯¾ã™ã‚‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ã“ã“ã«æ›¸ãã¾ã™ã€‚
æœ€å°é™ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ãŸã„ã¨ãã‚„ã€ãƒ›ã‚¹ãƒˆå´ã®ã‚¹ãƒšãƒƒã‚¯ãŒè²§å¼±ãªã¨ãã®ä»®æƒ³ç’°å¢ƒã¨ã—ã¦ã€
è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

## å‰æ

ãƒ›ã‚¹ãƒˆå´ãŒdnfã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹OSã§ã‚ã‚‹ã“ã¨ã€‚
æœ€è¿‘ã§ã¯rhelç³»ä»¥å¤–ã®Debianç³»ã€archç³»ã€Gentooã§ã‚‚
ç‰¹ã«ä½•ã‚‚ã—ãªãã¦ã‚‚OSæ¨™æº–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚

rhelç³»ä»¥å¤–ã¯dnfã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã€
/etc/yum.repos.dãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œã¦ã„ãªã„ã®ã§ã€
æ‰‹å‹•ã§ä½œæˆã™ã‚‹ã“ã¨ã€‚

dnfã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨rpmã‚‚ä¸€ç·’ã«ãã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒ­ã¨åˆ¥ã€…ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãƒ‡ã‚£ã‚¹ãƒˆãƒ­ã¨ä¸¡æ–¹ã‚ã‚‹ã®ã§æ³¨æ„ã€‚
rpmã‚³ãƒãƒ³ãƒ‰ã¯dnfã§rpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ãã«gpgã®ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹ã¨ãã«å†…éƒ¨ã§ä½¿ã£ã¦ã„ã‚‹ã®ã§å¿…é ˆã«ãªã‚‹ã€‚

debianç³»ã®å ´åˆ

```bash
sudo apt install -y dnf rpm

# gpgã‚­ãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ã¦ãŠãã€‚
mkdir -p /etc/pki/rpm-gpg
```

## ä¸‹æº–å‚™

ä»¥ä¸‹ã®æ§‹æˆã«ã—ã¦ãŠãã“ã¨ã€‚

### ã‚²ã‚¹ãƒˆå´ã®æº–å‚™

ã‚ã‚‰ã‹ã˜ã‚ä¸‹ã®ã‚ˆã†ã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’åˆ†ã‘ã¦ãŠãã€
ãã“ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™ã€‚

#### chrootã‚’ä½¿ã†å ´åˆ

```bash
# ä»®æƒ³ç’°å¢ƒç”¨ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’ä½œã£ã¦ãŠãã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
mkfs.ext4 /dev/sdxn
# ãƒ‡ãƒã‚¤ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚¦ãƒ³ãƒˆã€‚ã“ã“ã«dnfã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
mount /dev/sdxn /mnt/fedora
```

#### systemd-nspawnã‚’ä½¿ã†å ´åˆ

```bash
# debianç³»
sudo apt install -y systemd-container
```

ä»®æƒ³ç’°å¢ƒç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```bash
sudo mkdir /var/lib/machines/fedora
```

### ãƒ¬ãƒã‚¸ãƒˆãƒªã®è¨­å®š

ãƒ›ã‚¹ãƒˆå´ã®OSãŒmanjaro,archlinuxã®å ´åˆã¯dnfã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã ã‘ã§ã¯ã€dnfã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆãªã„ã®ã§ä¸‹è¨˜ã®è¨­å®šã‚’ã—ã¦ãŠãã“ã¨ã€‚
centos, oracle linuxã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦å¾®å¦™ã«ãƒ‘ã‚¹ãŒé•ã†ã®ã§æ³¨æ„

#### fedoraã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

```bash:/etc/yum.repos.d/fedora.repo
[fedora]
name=Fedora Server $releasever - Base
baseurl=http://ftp.riken.jp/pub/Linux/fedora/releases/$releasever/Server/$basearch/os
gpgkey=https://getfedora.org/static/fedora.gpg
```

#### centos-streamã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

##### gpg-keyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

```bash
# gpg keyã‚’æŒ‡å®šã®å ´æ‰€ã«ãŠãã€‚
sudo curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial http://ftp.riken.jp/pub/Linux/centos/RPM-GPG-KEY-CentOS-Official

# gpg keyã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
```

##### centos-stream 8

```bash:/etc/yum.repos.d/centos.repo
[centos]
name=CentOS-stream $releasever - Base
baseurl=http://ftp.riken.jp/pub/Linux/centos/$releasever-stream/BaseOS/$basearch/os
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
```

##### centos-stream 9

```bash:/etc/yum.repos.d/centos.repo
[centos]
name=CentOS-stream $releasever - Base
baseurl=http://ftp.riken.jp/pub/Linux/centos-stream/$releasever-stream/BaseOS/$basearch/os
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
```

#### ubi(rhel)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

ubiã¯å†é…å¸ƒå¯èƒ½ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘ã§æ§‹æˆã•ã‚ŒãŸrhelã§ã™ã€‚
æœ€å°é™ã®ã‚‚ã®ã ã‘ã—ã‹ãªã„ã®ã§ã€ã“ã“ã‹ã‚‰rhelã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€

[ubi ãƒ¬ãƒã‚¸ãƒˆãƒªã®èª¬æ˜](https://access.redhat.com/ja/articles/5632841)

https://www.redhat.com/security/data/fd431d51.txtã¨gpgkeyã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŒ
ã¡ã‚ƒã‚“ã¨gpgkeyã§ã™ã€‚ä»Šå¾Œå¤‰æ›´ã•ã‚Œã‚‹ã‹ã‚‚ã§ã™ãŒã€é »ç¹ã«å¤‰ã‚ã‚‹ã‚‚ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã€‚

ã“ã‚Œã«ã¤ã„ã¦ã¯Redhatã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è³‡æ–™ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

ä¸Šã®centosã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚‚ä½¿ã†ã“ã¨ã«ãªã‚‹ã®ã§è¿½åŠ ã—ã¦æ›¸ãã“ã¨ã€‚

ubiã§ã¯å¾Œè¿°ã®NetworkNagerã¨systemd-resolvedãŒãƒ¬ãƒã‚¸ãƒˆãƒªã«ãªã„ãŸã‚ã€Centosã®ãƒ¬ãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã‚ã›ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚
Centosã¯rhelã®ã‚¢ãƒƒãƒ—ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«ã‹ã¤äº’æ›æ€§ãŒå¼·ããªã£ãŸãŸã‚ã€ã»ã¼ã»ã¼ä¸å…·åˆã¯ãªã„ã¯ãšã§ã™ã€‚

##### gpg-keyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

```bash
# gpg keyã‚’æŒ‡å®šã®å ´æ‰€ã«ãŠãã€‚
sudo curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release https://www.redhat.com/security/data/fd431d51.txt

# gpg keyã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
```

```bash:/etc/yum.repos.d/ubi.repo
[ubi]
name=Red Hat Universal Base Image $releasever (RPMs) - BaseOS
baseurl=https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/baseos/os
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release

# ubiã¨centosã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¢«ã£ãŸæ™‚ã«ubiã®æ–¹ã‚’å„ªå…ˆã™ã‚‹ãŸã‚ã«æ›¸ãã€‚
# åˆ¥ã«priorityãŒ10ã§ã‚ã‚‹å¿…è¦ã¯ãªãcentosã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’å„ªå…ˆ
# priority ãŒæ›¸ã‹ã‚Œã¦ã„ãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§priority=99ã¨ãªã‚‹ã€‚
priority=10
```

#### oracle-linuxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

baseurlãŒbaseos/latestã ã£ãŸã‚Šã€/latestã ã£ãŸã‚Šå¾®å¦™ã«é•ã„ã¾ã™ã€‚æ³¨æ„ã€‚
gpgkeyãŒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ç•°ãªã‚‹ã®ã‚‚ç‰¹å¾´ã§ã™ã­ã€‚(ã‚„ã‚ã¦ã»ã—ã„ã§ã™...)

##### gpg-keyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

```bash
# gpg keyã‚’æŒ‡å®šã®å ´æ‰€ã«ãŠãã€‚
sudo curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol9 https://yum.oracle.com/RPM-GPG-KEY-oracle-ol9
sudo curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol8 https://yum.oracle.com/RPM-GPG-KEY-oracle-ol8
sudo curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol7 https://yum.oracle.com/RPM-GPG-KEY-oracle-ol7

# gpg keyã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol9
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol8
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol7

```

##### oracle-linux8 ã¾ãŸã¯9

```bash:/etc/yum.repos.d/oracle_linux.repo
[oracle_linux]
name=oracle_linux $releasever - Base
baseurl=https://yum.oracle.com/repo/OracleLinux/OL$releasever/baseos/latest/$basearch/
gpgkey=file:///yum.oracle.com/RPM-GPG-KEY-oracle-ol$releasever
```

##### oracle-linux7

```bash:/etc/yum.repos.d/oracle_linux.repo
[oracle_linux]
name=oracle_linux $releasever - Base
baseurl=https://yum.oracle.com/repo/OracleLinux/OL$releasever/latest/$basearch/
gpgkey=file:///yum.oracle.com/RPM-GPG-KEY-oracle-ol$releasever
```

## ãƒ›ã‚¹ãƒˆã‹ã‚‰ä»®æƒ³ç’°å¢ƒã¸ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚

rhelç³»ã¯æœ€å°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨vimã©ã“ã‚ã‹viã‚‚å…¥ã£ã¦ã„ãªã„ã—ã€
passwdã‚‚å…¥ã£ã¦ã„ãªã„ãŸã‚ã€ä»®æƒ³ç’°å¢ƒã«å…¥ã£ãŸå¾Œã®ä½œæ¥­ã§ã¤ã¾ãšãã¾ã™ã€‚
å¿…ãšã€vimã¨passwdã¯å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚

åå‰è§£æ±ºã«ã¯systemd-resolvedã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚
resolvectlãŒå¼·åŠ›ãªã®ã¨systemd-nspawnã‚’ä½¿ã†å ´åˆã¯
ã§ãã‚‹ã ã‘ã€systemdã«æ©Ÿèƒ½ã‚’å¯„ã›ãŸæ–¹ãŒç®¡ç†ãŒæ¥½ã§ã™ã€‚

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ç®¡ç†ã«ã¤ã„ã¦ã¯
fedoraã¯systemd-networkdã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã£ã¦ãã ã•ã„ã€‚

centos, oracle-linuxã‚‚systemd-networkdã‚’ä½¿ã„ãŸã„ã‚“ã§ã™ãŒã€
ã¡ã‚‡ã£ã¨[ãƒˆãƒ©ãƒ–ãƒ«ä¸­ã¿ãŸã„](https://bugzilla.redhat.com/show_bug.cgi?id=2020254)ãªã®ã§ã€ã—ã°ã‚‰ãã¯NetworkManagerã§ã™ã­...ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼˜ã§ã¯ã€å…¥ã‚‹ã“ã¨ã¯ãªãã€9ä»¥é™å…¥ã‚‹ã‹ã©ã†ã‹...NetworkManagerã‚ˆã‚Šsystemd-networkdã®æ–¹ãŒã‚¹ã‚¸ãŒã‚ˆãã€
ã„ã„æ„å‘³ã§å°ã•ã„ä½œã‚Šã«ãªã£ã¦ã„ã‚‹ã®ã§ã®ã¡ã«æœŸå¾…ã—ã¾ã—ã‚‡ã†ã€‚

å„ãƒ¬ãƒã‚¸ãƒˆãƒªã™ã¹ã¦armã§ã‚‚å‹•ãã®ã§ã€ARCH=aarch64ã¨ã™ã‚Œã°ã€
raspberry piã§ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### fedoraã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

```bash
ARCH=amd64
version=35
# repoã«yum.repoã«è¨­å®šã—ãŸãƒ¬ãƒã‚¸ãƒˆãƒªåï¼ˆä¾‹[fedora]ï¼‰ã‚’ä½¿ã†ã€‚
dnf install --installroot=/mnt/fedora --repo=fedora --releasever=$version fedora-release-server systemd dnf passwd vim systemd-networkd systemd-resolved
```

### centos-streamã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

```bash
ARCH=amd64
version=8
# repoã«yum.repoã«è¨­å®šã—ãŸãƒ¬ãƒã‚¸ãƒˆãƒªåï¼ˆä¾‹[centos]ï¼‰ã‚’ä½¿ã†ã€‚
dnf install --installroot=/mnt/centos --repo=centos --releasever=$version centos-stream-release systemd dnf passwd vim-minimal vim-filesystem NetworkManager systemd-resolved
```

### ubi(rhel)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

ubiã«ã¯systemd-resolvedã‚‚NetworkManagerã‚‚ãªã„ã€‚
ä½•?!
ã¨æ€ã†ã‹ã‚‚ã—ã‚Œãªã„ãŒã€centosã®NetworkMangerã‚’ä½¿ã‚ã›ã¦ã‚‚ã‚‰ãŠã†ã€‚

subscription-managerã¯rhelã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç™»éŒ²ã™ã‚‹äºˆå®šãŒãªã‘ã‚Œã°åˆ¥ã«ã„ã‚‰ãªã„ãŒã€
å¤§æŠµå¾Œã§æ¬²ã—ããªã‚‹ã¨æ€ã†ã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã€‚

dnf install -y --installroot=/media/c9b3ac1d-c148-482a-a544-ab3a765a1820/var/lib/machines/ubi9 --repo=ubi,centos --releasever=$version redhat-release subscription-manager systemd dnf passwd vim-minimal vim-filesystem NetworkManager systemd-resolve

```bash
ARCH=amd64
version=8
# repoã«yum.repoã«è¨­å®šã—ãŸãƒ¬ãƒã‚¸ãƒˆãƒªåï¼ˆä¾‹[ubi],[centos]ä¸¡æ–¹ï¼‰ã‚’ä½¿ã†ã€‚
dnf install --installroot=/mnt/ubi --repo=ubi,centos --releasever=$version redhat-release subscription-manager systemd dnf passwd vim-minimal vim-filesystem NetworkManager systemd-resolved
```

rhelã¯releaseã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚/etc/yum.repos.d/é…ä¸‹ã«repositoryæƒ…å ±ã‚’æ›¸ãè¾¼ã¾ãªã„ã¿ãŸã„ãªã®ã§ã€
repositoryæƒ…å ±ã‚’ç›´æ¥æ›¸ãè¾¼ã‚€ã€‚
ãªã‚“ã‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ã€è‡ªå‹•ã§æ›¸ãè¾¼ã¾ã‚Œã‚‹ã¨ã‹çŸ¥ã£ã¦ãŸã‚‰èª°ã‹æ•™ãˆã¦ãã ã•ã„ã€‚

ä»¥ä¸‹dockerhubã«ã‚ã‚‹ubi9ã®/etc/yum.repos.d/ubi.repoã‚’ã»ã¼ãã®ã¾ã¾å¼•ç”¨ã€‚
å„é …ç›®ã®æœ«å°¾ã«priorityã‚’è¿½åŠ ã—ã¦centosã‚ˆã‚Šã‚‚é«˜ããªã‚‹ã‚ˆã†ã«æ›¸ãã¾ã—ãŸã€‚
ã¾ãŸubi-9ã¨å…·ä½“çš„ã«æŒ‡å®šã•ã‚Œã¦ã„ãŸã‚‚ã®ã‚’$releaseverã¨å¤‰æ›´ã—ã¾ã—ãŸã€‚

ã“ã‚Œã‚’ä»®è£…ç’°å¢ƒã®å¤–ã‹ã‚‰vimã§æ›¸ãè¾¼ã‚“ã§ãã ã•ã„ã€‚

```bash:/etc/yum.repos.d/ubi.repo
[ubi-$releasever-baseos-rpms]
name = Red Hat Universal Base Image $releasever (RPMs) - BaseOS
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/baseos/os
enabled = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-baseos-debug-rpms]
name = Red Hat Universal Base Image $releasever (Debug RPMs) - BaseOS
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/baseos/debug
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-baseos-source]
name = Red Hat Universal Base Image $releasever (Source RPMs) - BaseOS
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/baseos/source/SRPMS
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-appstream-rpms]
name = Red Hat Universal Base Image $releasever (RPMs) - AppStream
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/appstream/os
enabled = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-appstream-debug-rpms]
name = Red Hat Universal Base Image $releasever (Debug RPMs) - AppStream
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/appstream/debug
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-appstream-source]
name = Red Hat Universal Base Image $releasever (Source RPMs) - AppStream
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/appstream/source/SRPMS
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-codeready-builder-rpms]
name = Red Hat Universal Base Image $releasever (RPMs) - CodeReady Builder
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/codeready-builder/os
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-codeready-builder]
name = Red Hat Universal Base Image $releasever (RPMs) - CodeReady Builder
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/codeready-builder/os
enabled = 1
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-codeready-builder-debug-rpms]
name = Red Hat Universal Base Image $releasever (Debug RPMs) - CodeReady Builder
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/codeready-builder/debug
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

[ubi-$releasever-codeready-builder-source]
name = Red Hat Universal Base Image $releasever (Source RPMs) - CodeReady Builder
baseurl = https://cdn-ubi.redhat.com/content/public/ubi/dist/ubi$releasever/$releasever/$basearch/codeready-builder/source/SRPMS
enabled = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release
gpgcheck = 1
priority = 98

```

NetworkManagerã¨systemd-networkdãªã©centosã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚‚è¿½åŠ ã—ã¾ã™ã€‚
ã“ã‚Œã‚‚centos-releaseã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸæ™‚ã®defaultã®è¨­å®šã§ã™ã€‚

```bash:/etc/yum.repos.d/centos.repo
[baseos]
name=CentOS Stream $releasever - BaseOS
metalink=https://mirrors.centos.org/metalink?repo=centos-baseos-$stream&arch=$basearch&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
countme=1
enabled=1

[baseos-debuginfo]
name=CentOS Stream $releasever - BaseOS - Debug
metalink=https://mirrors.centos.org/metalink?repo=centos-baseos-debug-$stream&arch=$basearch&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
enabled=0

[baseos-source]
name=CentOS Stream $releasever - BaseOS - Source
metalink=https://mirrors.centos.org/metalink?repo=centos-baseos-source-$stream&arch=source&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
enabled=0

[appstream]
name=CentOS Stream $releasever - AppStream
metalink=https://mirrors.centos.org/metalink?repo=centos-appstream-$stream&arch=$basearch&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
countme=1
enabled=1

[appstream-debuginfo]
name=CentOS Stream $releasever - AppStream - Debug
metalink=https://mirrors.centos.org/metalink?repo=centos-appstream-debug-$stream&arch=$basearch&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
enabled=0

[appstream-source]
name=CentOS Stream $releasever - AppStream - Source
metalink=https://mirrors.centos.org/metalink?repo=centos-appstream-source-$stream&arch=source&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
enabled=0

[crb]
name=CentOS Stream $releasever - CRB
metalink=https://mirrors.centos.org/metalink?repo=centos-crb-$stream&arch=$basearch&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
countme=1
enabled=0

[crb-debuginfo]
name=CentOS Stream $releasever - CRB - Debug
metalink=https://mirrors.centos.org/metalink?repo=centos-crb-debug-$stream&arch=$basearch&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
enabled=0

[crb-source]
name=CentOS Stream $releasever - CRB - Source
metalink=https://mirrors.centos.org/metalink?repo=centos-crb-source-$stream&arch=source&protocol=https,http
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
gpgcheck=1
repo_gpgcheck=0
metadata_expire=6h
enabled=0
```

centosã®ã‚­ãƒ¼ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œãªã„ã®ã§ä»®è£…ç’°å¢ƒã®å¤–ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
# gpg keyã‚’ä»®è£…ç’°å¢ƒã®å¤–ã‹ã‚‰æŒ‡å®šã®å ´æ‰€ã«ãŠãã€‚
# /var/lib/machines/ubi9ã«ä»®æƒ³ãƒã‚·ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹å ´åˆ
sudo curl -o /var/lib/machinec/ubi9/etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial http://ftp.riken.jp/pub/Linux/centos/RPM-GPG-KEY-CentOS-Official

# systemd-nspawnãªã‚Šchrootãªã‚Šå…¥ã£ã¦ã‹ã‚‰rpm --import
sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
```

ä¸Šã«ã‚ã‚‹centos.repoã®metalinkã«ã¤ã„ã¦centosè‡ªä½“ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã¯centos-releaseãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã®ã§ã€
\$streamãŒå±•é–‹ã•ã‚Œã‚‹ãŒã€ubiã®ç’°å¢ƒã‚’ã§ãã‚‹ã ã‘å£Šã—ãŸããªã„ã®ã§centosãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã§ãã‚‹ã ã‘å…¥ã‚ŒãŸããªã„ã€‚

ã‚ˆã£ã¦\$streamã‚’\$releaseverã¨ã®å€¤ã§å±•é–‹ã§ãã‚‹ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹ã€‚

systemd-nspawnä»®è£…ç’°å¢ƒå†…ã€ã¾ãŸã¯å¤–ã‹ã‚‰gsedã‚’ä½¿ã£ã¦ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚Œã°è‰¯ã„ã€‚

```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ãŠãã€‚
cp /etc/yum.repos.d/centos.repo /etc/yum.repos.d/centos.repo.org

# centos.repoã‚’ä¸Šæ›¸ã
sed -i 's/\$stream/\$releasever-stream/g' /etc/yum.repos.d/centos.repo
```

ã“ã“ã§dnfã‚’ä½¿ã†ã¨ã¾ã å•é¡ŒãŒã‚ã‚‹ã€‚

ubiã®repositoryåã¨centosã®ãƒ¬ãƒã‚¸ãƒˆãƒªåãŒæ··ã–ã‚‹ãŸã‚ã€ã‚„ã‚„ã“ã—ã„ã€‚
ã‚ˆã£ã¦ã€centosã®ãƒ¬ãƒã‚¸ãƒˆãƒªã¯centos-\$releasever-ã¨æ¥é ­èªã‚’ã¤ã‘ã‚‹ã€‚

ã“ã‚Œã¯ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚Œã°è‰¯ã„ã€‚

```bash
sed -i 's/^\[/\[centos-\$releasever-/g' /etc/yum.repos.d/centos.repo
```

priorityã¯centosã‚ˆã‚Šã‚‚ubiãŒå„ªå…ˆã•ã‚Œã‚‹ã‚ˆã†ã«ã‹ã‘ã‚Œã°ãªã‚“ã§ã‚‚è‰¯ã„ã§ã™ã€‚
ã“ã®æ™‚ç‚¹ã§ã¯ã¾ã å†é…å¸ƒå¯èƒ½ãªçŠ¶æ…‹ã§ã™ã€‚

å¾Œã«rhelã®subscriptionã‚‚å…¥ã‚Œã‚Œã‚‹ã‚ˆã†ã«ã€
rhel>ubi>centosã¨ã„ã†é †ç•ªã«å„ªå…ˆé †ä½ãŒã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚

### oracle-linuxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆ

#### oracle linux 8, 9ã®å ´åˆ

dnf install --installroot=/media/c9b3ac1d-c148-482a-a544-ab3a765a1820/var/lib/machines/oracle_linux9 --repo=oracle_linux --releasever=$version oraclelinux-release-el${version} systemd dnf passwd vim-minimal vim-filesystem NetworkManager systemd-resolved

```bash
ARCH=x86_64
version=8
# repoã«yum.repoã«è¨­å®šã—ãŸãƒ¬ãƒã‚¸ãƒˆãƒªåï¼ˆä¾‹[oracle_linux]ï¼‰ã‚’ä½¿ã†ã€‚
dnf install --installroot=/mnt/oracle_linux --repo=oracle_linux --releasever=$version oraclelinux-release-el${version} systemd dnf passwd vim-minimal vim-filesystem NetworkManager systemd-resolved
```

#### oracle linux 7ã®å ´åˆ

```bash
ARCH=x86_64
version=7
# repoã«yum.repoã«è¨­å®šã—ãŸãƒ¬ãƒã‚¸ãƒˆãƒªåï¼ˆä¾‹[oracle_linux]ï¼‰ã‚’ä½¿ã†ã€‚
# dnf ãŒç„¡ã„ã®ã§å¤‰ã‚ã‚Šã«yumã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
# ã¾ãŸosã‚’èµ·å‹•ã•ã›ã‚‹ã®ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦rootfilesã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚å¿…è¦ã«ãªã‚‹ã€‚
# dbusã‚‚è‡ªå‹•ã§å…¥ã‚‰ãªã„ã®ã§è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

dnf install --installroot=/mnt/oracle_linux --repo=oracle_linux --releasever=$version oraclelinux-release-el${version} systemd yum rootfiles dbus passwd vim-minimal vim-filesystem NetworkManager systemd-resolved
```

oracle linux7ã¯/etc/os-releaseã‚’æ‰‹å‹•ã§æ›¸ã„ã¦ã„ã‚‹or linux imageã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã„ã¨æ›¸ãè¾¼ã¾ãªã„ã£ã½ã„ã®ã§ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦è¿½åŠ ã™ã‚‹ã€‚
/etc/os-releaseãŒç„¡ã„ã¨machinectlã¯osã§ãªã„ã¨åˆ¤æ–­ã™ã‚‹ãŸã‚ã€‚å¿…é ˆã€‚
ä»®æƒ³ç’°ä¸‹ã§ã€‚

```bash:/etc/os-release
NAME="Oracle Linux Server"
VERSION="7.9"
ID="ol"
ID_LIKE="fedora"
VARIANT="Server"
VARIANT_ID="server"
VERSION_ID="7.9"
PRETTY_NAME="Oracle Linux Server 7.9"
ANSI_COLOR="0;31"
CPE_NAME="cpe:/o:oracle:linux:7:9:server"
HOME_URL="https://linux.oracle.com/"
BUG_REPORT_URL="https://bugzilla.oracle.com/"

ORACLE_BUGZILLA_PRODUCT="Oracle Linux 7"
ORACLE_BUGZILLA_PRODUCT_VERSION=7.9
ORACLE_SUPPORT_PRODUCT="Oracle Linux"
ORACLE_SUPPORT_PRODUCT_VERSION=7.9
```

å¿…é ˆã§ãªã„ã¯ãšã ãŒã€ä¸€å¿œã€/etc/oracle-releaseã‚‚è¿½åŠ ã—ã¦ãŠãã€‚

```bash:/etc/oracle-release
Oracle Linux Server release 7.9
```

yumã¯GPGã®è§£æ±ºã¾ã§ã—ãªã„ã®ã§ã€‚gpgã®éµã‚’æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

```bash
# éµç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
# ä»®æƒ³ç’°å¢ƒã¸ã®ãƒ‘ã‚¹
mkdir /mnt/oracle_linux/etc/pki/rpm-gpg
wget http://public-yum.oracle.com/RPM-GPG-KEY-oracle-ol7 -O /mnt/oracle_linux/etc/pki/rpm-gpg/RPM-GPG-KEY-oracle
```

#### ãã®ä»–å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

xargsã‚„less, pingã¯å¿…é ˆç´šã ã¨æ€ã†ã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```bash
dnf install -y findutils less iputils mlocate
```

## åå‰è§£æ±º

ã“ã‚Œã‚‰ã®è¨­å®šã‚’ã—ãªã„ã¨ã€sysmted-nspawnã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦èµ·å‹•ã•ã›ãŸå ´åˆã«
åå‰è§£æ±ºãŒè¡Œã‚ã‚Œãªã„ã®ã§ã€å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«åˆ°é”ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

systemd-resolveã‚’ä½¿ã‚ãªãã¦ã‚‚åå‰è§£æ±ºã¯ã§ãã¾ã™ãŒã€
ç›¸å½“ãªç†ç”±ãŒãªã„é™ã‚Šsystemd-resolvedã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚

### systemd-resolveã‚’ä½¿ã‚ãªã„å ´åˆ

å¤–ã‹ã‚‰vimã§/var/lib/machines/machinename/etc/systemd/resolv.confã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
å¤–ã‹ã‚‰ã ã¨ãƒ›ã‚¹ãƒˆã®è¨­å®šã‚’å‚è€ƒã—ãŸã‚Šã‚³ãƒ”ãƒšã§ãã‚‹ã®ã§æ¥½ã ã¨æ€ã„ã¾ã™ã€‚
DNSã®è¨­å®šã ã‘ã™ã‚‹ãªã‚‰
DNS=8.8.8.8ã¨ã™ã‚‹ã¨ã‚ˆã„ã€‚

### systemd-resolvedã‚’ä½¿ã†å ´åˆ

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ã«systemd-networkdã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã€NetworkManagerã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ã§å¤‰ã‚ã‚Šã¾ã™ã€‚
systemd-networkdã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ç‰¹ã«è¨­å®šã‚’è¡Œã‚ãªãã¦ã‚‚systemd-resolvedãŒä½¿ã‚ã‚Œã¾ã™ã€‚

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ã«NetworkManagerã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯åå‰è§£æ±ºã«systemd-resolvedã‚’ä½¿ã†ã“ã¨ã‚’æ˜è¨˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
mainã‚»ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¸‹è¨˜ã®ã‚ˆã†ã«dnsã«systemd-resolvedã¨æ›¸ã„ã¦ãã ã•ã„ã€‚

```bash:/etc/NetworkManager/NetworkManager.conf
...
[main]
dns=systemd-resolved
...
```

## ä»®æƒ³ç’°å¢ƒå†…ã§dnfã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨--releaseverã‚’ã¤ã‘ã‚ã¨è¨€ã‚ã‚Œã‚‹å ´åˆ

ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹æ™‚ãŒã‚ã‚Šã¾ã™ã€‚
Unable to detect release version (use '--releasever' to specify release version)

systemd-nspawnã‚’ä½¿ã£ã¦ã„ã¦ä»®æƒ³ç’°å¢ƒã«å…¥ã‚‹ã¨ã€os-releaseã‹ã‚‰ã†ã¾ãå€¤ã‚’
å–å¾—ã§ããªã„ã®ã‹ã€ä»®æƒ³ãƒã‚·ãƒ³ã®dnfã‚³ãƒãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ãŒã§ã¾ã™ã€‚

--releasever 8 ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã‹
ã‚ã‚‰ã‹ã˜ã‚/etc/yum.d//etc/yum.repos.d/*.repoã«æ›¸ã‹ã‚Œã¦ã„ã‚‹$releaseverã®å€¤ã‚’å®Ÿéš›ã®å€¤ã«ä¸Šæ›¸ãã—ã¦ãã ã•ã„ã€‚

ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¸€æ‹¬ã§å¤‰æ›´ã§ãã¾ã™ã€‚
https://mirrors.centos.org/metalink?repo=centos-baseos-9&arch=aarch64&protocol=https,http
```bash
# fedora 36ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ
ls -1 /var/lib/machines/fedora/etc/yum.repos.d/ | xargs -I {} sed -i 's/\$releasever/36/g' /var/lib/machines/fedora/etc/yum.repos.d/{}
```

## ã¾ã¨ã‚

ã‚ã¨ã¯chrootã‹ã€systemd-nspawnã§ãã‚Œãã‚Œã®ç’°å¢ƒã«å…¥ã‚Šã€Linux imageã‚„firmwareã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚Šã€osã®è¨­å®šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

[oracle 21cã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®è³‡æ–™](https://www.oracle.com/jp/a/tech/docs/technical-resources/21c-sidb-installationguide.pdf)ã‚’è¦‹ã¦ã‚‚oracle linux7ãŒä¾‹ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã—ã€
[oracleé…å¸ƒã®docker container](https://container-registry.oracle.com/ords/f?p=113:1:15172575214193:::1:P1_BUSINESS_AREA:3&cs=3RlV6mpywX5141n0d3DT9bfmjGJ2IHzFhCKLNDNbDeKcH5o1Sd-adLVQMRkytxZiODJwmfexrwDo75c1Iy2SZDg)ã‚‚oracle linux7ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã§ã€
DBç”¨é€”ã§ä½¿ã†å ´åˆã¯ã¾ã ã—ã°ã‚‰ãã¯oracle linux7ã‚’ä½¿ã†ã“ã¨ã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚

[NetworkManagerã§systemd](https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains)

[rhelã®gpgã‚­ãƒ¼ã®å ´æ‰€](https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/pdf/converting_from_an_rpm-based_linux_distribution_to_rhel/red_hat_enterprise_linux-8-converting_from_an_rpm-based_linux_distribution_to_rhel-ja-jp.pdf)
